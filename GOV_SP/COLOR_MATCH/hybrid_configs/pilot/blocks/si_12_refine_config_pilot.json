{
  "source": {
    "channel_order": "RGBI",
    "calibration_tiles": [
      "H:\\TPHOTO_SI12\\out\\100081.tif",
      "H:\\TPHOTO_SI12\\out\\100082.tif",
      "H:\\TPHOTO_SI12\\out\\100083.tif",
      "H:\\TPHOTO_SI12\\out\\101079.tif",
      "H:\\TPHOTO_SI12\\out\\101080.tif",
      "H:\\TPHOTO_SI12\\out\\101081.tif",
      "H:\\TPHOTO_SI12\\out\\101082.tif",
      "H:\\TPHOTO_SI12\\out\\101083.tif",
      "H:\\TPHOTO_SI12\\out\\101084.tif",
      "H:\\TPHOTO_SI12\\out\\102077.tif",
      "H:\\TPHOTO_SI12\\out\\102078.tif",
      "H:\\TPHOTO_SI12\\out\\102079.tif",
      "H:\\TPHOTO_SI12\\out\\102080.tif",
      "H:\\TPHOTO_SI12\\out\\102081.tif",
      "H:\\TPHOTO_SI12\\out\\102082.tif",
      "H:\\TPHOTO_SI12\\out\\102083.tif",
      "H:\\TPHOTO_SI12\\out\\102084.tif",
      "H:\\TPHOTO_SI12\\out\\103075.tif",
      "H:\\TPHOTO_SI12\\out\\103076.tif",
      "H:\\TPHOTO_SI12\\out\\103077.tif",
      "H:\\TPHOTO_SI12\\out\\103078.tif",
      "H:\\TPHOTO_SI12\\out\\103079.tif",
      "H:\\TPHOTO_SI12\\out\\103080.tif",
      "H:\\TPHOTO_SI12\\out\\103081.tif",
      "H:\\TPHOTO_SI12\\out\\103082.tif",
      "H:\\TPHOTO_SI12\\out\\103083.tif",
      "H:\\TPHOTO_SI12\\out\\103084.tif",
      "H:\\TPHOTO_SI12\\out\\103085.tif",
      "H:\\TPHOTO_SI12\\out\\104073.tif",
      "H:\\TPHOTO_SI12\\out\\104074.tif",
      "H:\\TPHOTO_SI12\\out\\104075.tif",
      "H:\\TPHOTO_SI12\\out\\104076.tif",
      "H:\\TPHOTO_SI12\\out\\104077.tif",
      "H:\\TPHOTO_SI12\\out\\104078.tif",
      "H:\\TPHOTO_SI12\\out\\104079.tif",
      "H:\\TPHOTO_SI12\\out\\104080.tif",
      "H:\\TPHOTO_SI12\\out\\104081.tif",
      "H:\\TPHOTO_SI12\\out\\104082.tif",
      "H:\\TPHOTO_SI12\\out\\104083.tif",
      "H:\\TPHOTO_SI12\\out\\104084.tif",
      "H:\\TPHOTO_SI12\\out\\104085.tif",
      "H:\\TPHOTO_SI12\\out\\105071.tif",
      "H:\\TPHOTO_SI12\\out\\105072.tif",
      "H:\\TPHOTO_SI12\\out\\105073.tif",
      "H:\\TPHOTO_SI12\\out\\105074.tif",
      "H:\\TPHOTO_SI12\\out\\105075.tif",
      "H:\\TPHOTO_SI12\\out\\105076.tif",
      "H:\\TPHOTO_SI12\\out\\105077.tif",
      "H:\\TPHOTO_SI12\\out\\105078.tif",
      "H:\\TPHOTO_SI12\\out\\105079.tif",
      "H:\\TPHOTO_SI12\\out\\105080.tif",
      "H:\\TPHOTO_SI12\\out\\105081.tif",
      "H:\\TPHOTO_SI12\\out\\105082.tif",
      "H:\\TPHOTO_SI12\\out\\105083.tif",
      "H:\\TPHOTO_SI12\\out\\105084.tif",
      "H:\\TPHOTO_SI12\\out\\105085.tif",
      "H:\\TPHOTO_SI12\\out\\105086.tif",
      "H:\\TPHOTO_SI12\\out\\106068.tif",
      "H:\\TPHOTO_SI12\\out\\106069.tif",
      "H:\\TPHOTO_SI12\\out\\106070.tif",
      "H:\\TPHOTO_SI12\\out\\106071.tif",
      "H:\\TPHOTO_SI12\\out\\106072.tif",
      "H:\\TPHOTO_SI12\\out\\106073.tif",
      "H:\\TPHOTO_SI12\\out\\106074.tif",
      "H:\\TPHOTO_SI12\\out\\106075.tif",
      "H:\\TPHOTO_SI12\\out\\106076.tif",
      "H:\\TPHOTO_SI12\\out\\106077.tif",
      "H:\\TPHOTO_SI12\\out\\106078.tif",
      "H:\\TPHOTO_SI12\\out\\106079.tif",
      "H:\\TPHOTO_SI12\\out\\106080.tif",
      "H:\\TPHOTO_SI12\\out\\106081.tif",
      "H:\\TPHOTO_SI12\\out\\106082.tif",
      "H:\\TPHOTO_SI12\\out\\106083.tif",
      "H:\\TPHOTO_SI12\\out\\106084.tif",
      "H:\\TPHOTO_SI12\\out\\106085.tif",
      "H:\\TPHOTO_SI12\\out\\106086.tif",
      "H:\\TPHOTO_SI12\\out\\107066.tif",
      "H:\\TPHOTO_SI12\\out\\107067.tif",
      "H:\\TPHOTO_SI12\\out\\107068.tif",
      "H:\\TPHOTO_SI12\\out\\107069.tif",
      "H:\\TPHOTO_SI12\\out\\107070.tif",
      "H:\\TPHOTO_SI12\\out\\107071.tif",
      "H:\\TPHOTO_SI12\\out\\107072.tif",
      "H:\\TPHOTO_SI12\\out\\107073.tif",
      "H:\\TPHOTO_SI12\\out\\107074.tif",
      "H:\\TPHOTO_SI12\\out\\107075.tif",
      "H:\\TPHOTO_SI12\\out\\107076.tif",
      "H:\\TPHOTO_SI12\\out\\107077.tif",
      "H:\\TPHOTO_SI12\\out\\107078.tif",
      "H:\\TPHOTO_SI12\\out\\107079.tif",
      "H:\\TPHOTO_SI12\\out\\107080.tif",
      "H:\\TPHOTO_SI12\\out\\107081.tif",
      "H:\\TPHOTO_SI12\\out\\107082.tif",
      "H:\\TPHOTO_SI12\\out\\107083.tif",
      "H:\\TPHOTO_SI12\\out\\107084.tif",
      "H:\\TPHOTO_SI12\\out\\107085.tif",
      "H:\\TPHOTO_SI12\\out\\107086.tif",
      "H:\\TPHOTO_SI12\\out\\107087.tif",
      "H:\\TPHOTO_SI12\\out\\108064.tif",
      "H:\\TPHOTO_SI12\\out\\108065.tif",
      "H:\\TPHOTO_SI12\\out\\108066.tif",
      "H:\\TPHOTO_SI12\\out\\108067.tif",
      "H:\\TPHOTO_SI12\\out\\108068.tif",
      "H:\\TPHOTO_SI12\\out\\108069.tif",
      "H:\\TPHOTO_SI12\\out\\108070.tif",
      "H:\\TPHOTO_SI12\\out\\108071.tif",
      "H:\\TPHOTO_SI12\\out\\108072.tif",
      "H:\\TPHOTO_SI12\\out\\108073.tif",
      "H:\\TPHOTO_SI12\\out\\108074.tif",
      "H:\\TPHOTO_SI12\\out\\108075.tif",
      "H:\\TPHOTO_SI12\\out\\108076.tif",
      "H:\\TPHOTO_SI12\\out\\108077.tif",
      "H:\\TPHOTO_SI12\\out\\108078.tif",
      "H:\\TPHOTO_SI12\\out\\108079.tif",
      "H:\\TPHOTO_SI12\\out\\108080.tif",
      "H:\\TPHOTO_SI12\\out\\108081.tif",
      "H:\\TPHOTO_SI12\\out\\108082.tif",
      "H:\\TPHOTO_SI12\\out\\108083.tif",
      "H:\\TPHOTO_SI12\\out\\108084.tif",
      "H:\\TPHOTO_SI12\\out\\108085.tif"
    ],
    "apply_tiles": [
      "H:\\TPHOTO_SI12\\out\\100081.tif",
      "H:\\TPHOTO_SI12\\out\\100082.tif",
      "H:\\TPHOTO_SI12\\out\\100083.tif",
      "H:\\TPHOTO_SI12\\out\\101079.tif",
      "H:\\TPHOTO_SI12\\out\\101080.tif",
      "H:\\TPHOTO_SI12\\out\\101081.tif",
      "H:\\TPHOTO_SI12\\out\\101082.tif",
      "H:\\TPHOTO_SI12\\out\\101083.tif",
      "H:\\TPHOTO_SI12\\out\\101084.tif",
      "H:\\TPHOTO_SI12\\out\\102077.tif"
    ]
  },
  "reference": {
    "rgb_channel_order": "RGB",
    "rgb_images": [
      "E:/SP_OUT/REF_RGB/*.tif"
    ],
    "cir_channel_order": "IRRG",
    "cir_images": [
      "E:/SP_OUT/REF_IR/*.tif"
    ]
  },
  "sampling": {
    "max_pixels_per_image": 30000,
    "downsample_max_side": 512,
    "percentile_low": 3.0,
    "percentile_high": 97.0,
    "seed": 42
  },
  "calibration_filter": {
    "enabled": false,
    "channels": [
      "R",
      "G",
      "B",
      "I"
    ],
    "zscore_threshold": 3.5,
    "downsample_max_side": 256,
    "min_keep": 6
  },
  "constraints": {
    "gain_min": 0.85,
    "gain_max": 1.15,
    "per_channel": {
      "I": {
        "gain_min": 0.9,
        "gain_max": 1.25
      }
    }
  },
  "ir_tuning": {
    "gain_scale": 1.03,
    "offset_shift": 2.0
  },
  "vegetation_tuning": {
    "enabled": true,
    "strength": 1.0,
    "mask": {
      "exg_threshold": 20.0,
      "exg_softness": 15.0,
      "rg_ratio_threshold": 1.05,
      "rg_ratio_softness": 0.1,
      "gb_ratio_threshold": 1.05,
      "gb_ratio_softness": 0.1,
      "use_ndvi": true,
      "ndvi_threshold": 0.05,
      "ndvi_softness": 0.05
    },
    "adjust": {
      "red_gain": 0.99,
      "red_offset": 0.0,
      "green_gain": 1.07,
      "green_offset": 0.0,
      "blue_gain": 0.99,
      "blue_offset": 0.0,
      "ir_gain": 1.0,
      "ir_offset": 0.0
    }
  },
  "refinement": {
    "enabled": true,
    "base_params_file": "D:/SCRIPTS/GOV_SP/COLOR_MATCH/hybrid_configs/out_pilot/global_params_pilot.json",
    "blend": 0.6,
    "max_delta_gain": 0.05,
    "max_delta_offset": 12.0,
    "per_channel": {
      "I": {
        "max_delta_gain": 0.08,
        "max_delta_offset": 16.0
      }
    }
  },
  "output": {
    "dir": "E:/SP_OUT/PILOT/SI_12",
    "suffix": "_matched",
    "overwrite": false
  }
}