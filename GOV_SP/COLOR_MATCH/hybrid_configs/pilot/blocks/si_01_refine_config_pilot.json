{
  "source": {
    "channel_order": "RGBI",
    "calibration_tiles": [
      "J:\\SI_01\\OUT\\055009.tif",
      "J:\\SI_01\\OUT\\055010.tif",
      "J:\\SI_01\\OUT\\055011.tif",
      "J:\\SI_01\\OUT\\055012.tif",
      "J:\\SI_01\\OUT\\055013.tif",
      "J:\\SI_01\\OUT\\055014.tif",
      "J:\\SI_01\\OUT\\055015.tif",
      "J:\\SI_01\\OUT\\055016.tif",
      "J:\\SI_01\\OUT\\056008.tif",
      "J:\\SI_01\\OUT\\056009.tif",
      "J:\\SI_01\\OUT\\056010.tif",
      "J:\\SI_01\\OUT\\056011.tif",
      "J:\\SI_01\\OUT\\056012.tif",
      "J:\\SI_01\\OUT\\056013.tif",
      "J:\\SI_01\\OUT\\056014.tif",
      "J:\\SI_01\\OUT\\056015.tif",
      "J:\\SI_01\\OUT\\056016.tif",
      "J:\\SI_01\\OUT\\057008.tif",
      "J:\\SI_01\\OUT\\057009.tif",
      "J:\\SI_01\\OUT\\057010.tif",
      "J:\\SI_01\\OUT\\057011.tif",
      "J:\\SI_01\\OUT\\057012.tif",
      "J:\\SI_01\\OUT\\057013.tif",
      "J:\\SI_01\\OUT\\057014.tif",
      "J:\\SI_01\\OUT\\057015.tif",
      "J:\\SI_01\\OUT\\057016.tif",
      "J:\\SI_01\\OUT\\057017.tif",
      "J:\\SI_01\\OUT\\058008.tif",
      "J:\\SI_01\\OUT\\058009.tif",
      "J:\\SI_01\\OUT\\058010.tif",
      "J:\\SI_01\\OUT\\058011.tif",
      "J:\\SI_01\\OUT\\058012.tif",
      "J:\\SI_01\\OUT\\058013.tif",
      "J:\\SI_01\\OUT\\058014.tif",
      "J:\\SI_01\\OUT\\058015.tif",
      "J:\\SI_01\\OUT\\058016.tif",
      "J:\\SI_01\\OUT\\058017.tif",
      "J:\\SI_01\\OUT\\058018.tif",
      "J:\\SI_01\\OUT\\058019.tif",
      "J:\\SI_01\\OUT\\058020.tif",
      "J:\\SI_01\\OUT\\059008.tif",
      "J:\\SI_01\\OUT\\059009.tif",
      "J:\\SI_01\\OUT\\059010.tif",
      "J:\\SI_01\\OUT\\059011.tif",
      "J:\\SI_01\\OUT\\059012.tif",
      "J:\\SI_01\\OUT\\059013.tif",
      "J:\\SI_01\\OUT\\059014.tif",
      "J:\\SI_01\\OUT\\059015.tif",
      "J:\\SI_01\\OUT\\059016.tif",
      "J:\\SI_01\\OUT\\059017.tif",
      "J:\\SI_01\\OUT\\059018.tif",
      "J:\\SI_01\\OUT\\059019.tif",
      "J:\\SI_01\\OUT\\059020.tif",
      "J:\\SI_01\\OUT\\059021.tif",
      "J:\\SI_01\\OUT\\060008.tif",
      "J:\\SI_01\\OUT\\060009.tif",
      "J:\\SI_01\\OUT\\060010.tif",
      "J:\\SI_01\\OUT\\060011.tif",
      "J:\\SI_01\\OUT\\060012.tif",
      "J:\\SI_01\\OUT\\060013.tif",
      "J:\\SI_01\\OUT\\060014.tif",
      "J:\\SI_01\\OUT\\060015.tif",
      "J:\\SI_01\\OUT\\060016.tif",
      "J:\\SI_01\\OUT\\060017.tif",
      "J:\\SI_01\\OUT\\060018.tif",
      "J:\\SI_01\\OUT\\060019.tif",
      "J:\\SI_01\\OUT\\060020.tif",
      "J:\\SI_01\\OUT\\060021.tif",
      "J:\\SI_01\\OUT\\060022.tif",
      "J:\\SI_01\\OUT\\061008.tif",
      "J:\\SI_01\\OUT\\061009.tif",
      "J:\\SI_01\\OUT\\061010.tif",
      "J:\\SI_01\\OUT\\061011.tif",
      "J:\\SI_01\\OUT\\061012.tif",
      "J:\\SI_01\\OUT\\061013.tif",
      "J:\\SI_01\\OUT\\061014.tif",
      "J:\\SI_01\\OUT\\061015.tif",
      "J:\\SI_01\\OUT\\061016.tif",
      "J:\\SI_01\\OUT\\061017.tif",
      "J:\\SI_01\\OUT\\061018.tif",
      "J:\\SI_01\\OUT\\061019.tif",
      "J:\\SI_01\\OUT\\061020.tif",
      "J:\\SI_01\\OUT\\061021.tif",
      "J:\\SI_01\\OUT\\061022.tif",
      "J:\\SI_01\\OUT\\062008.tif",
      "J:\\SI_01\\OUT\\062009.tif",
      "J:\\SI_01\\OUT\\062010.tif",
      "J:\\SI_01\\OUT\\062011.tif",
      "J:\\SI_01\\OUT\\062012.tif",
      "J:\\SI_01\\OUT\\062013.tif",
      "J:\\SI_01\\OUT\\062014.tif",
      "J:\\SI_01\\OUT\\062015.tif",
      "J:\\SI_01\\OUT\\062016.tif",
      "J:\\SI_01\\OUT\\062017.tif",
      "J:\\SI_01\\OUT\\062018.tif",
      "J:\\SI_01\\OUT\\062019.tif",
      "J:\\SI_01\\OUT\\062020.tif",
      "J:\\SI_01\\OUT\\062021.tif",
      "J:\\SI_01\\OUT\\062022.tif",
      "J:\\SI_01\\OUT\\063003.tif",
      "J:\\SI_01\\OUT\\063004.tif",
      "J:\\SI_01\\OUT\\063005.tif",
      "J:\\SI_01\\OUT\\063006.tif",
      "J:\\SI_01\\OUT\\063007.tif",
      "J:\\SI_01\\OUT\\063008.tif",
      "J:\\SI_01\\OUT\\063009.tif",
      "J:\\SI_01\\OUT\\063010.tif",
      "J:\\SI_01\\OUT\\063011.tif",
      "J:\\SI_01\\OUT\\063012.tif",
      "J:\\SI_01\\OUT\\063013.tif",
      "J:\\SI_01\\OUT\\063014.tif",
      "J:\\SI_01\\OUT\\063015.tif",
      "J:\\SI_01\\OUT\\063016.tif",
      "J:\\SI_01\\OUT\\063017.tif",
      "J:\\SI_01\\OUT\\063018.tif",
      "J:\\SI_01\\OUT\\063019.tif",
      "J:\\SI_01\\OUT\\063020.tif",
      "J:\\SI_01\\OUT\\063021.tif",
      "J:\\SI_01\\OUT\\063022.tif",
      "J:\\SI_01\\OUT\\063023.tif"
    ],
    "apply_tiles": [
      "J:\\SI_01\\OUT\\055009.tif",
      "J:\\SI_01\\OUT\\055010.tif",
      "J:\\SI_01\\OUT\\055011.tif",
      "J:\\SI_01\\OUT\\055012.tif",
      "J:\\SI_01\\OUT\\055013.tif",
      "J:\\SI_01\\OUT\\055014.tif",
      "J:\\SI_01\\OUT\\055015.tif",
      "J:\\SI_01\\OUT\\055016.tif",
      "J:\\SI_01\\OUT\\056008.tif",
      "J:\\SI_01\\OUT\\056009.tif"
    ]
  },
  "reference": {
    "rgb_channel_order": "RGB",
    "rgb_images": [
      "E:/SP_OUT/REF_RGB/*.tif"
    ],
    "cir_channel_order": "IRRG",
    "cir_images": [
      "E:/SP_OUT/REF_IR/*.tif"
    ]
  },
  "sampling": {
    "max_pixels_per_image": 30000,
    "downsample_max_side": 512,
    "percentile_low": 3.0,
    "percentile_high": 97.0,
    "seed": 42
  },
  "calibration_filter": {
    "enabled": false,
    "channels": [
      "R",
      "G",
      "B",
      "I"
    ],
    "zscore_threshold": 3.5,
    "downsample_max_side": 256,
    "min_keep": 6
  },
  "constraints": {
    "gain_min": 0.85,
    "gain_max": 1.15,
    "per_channel": {
      "I": {
        "gain_min": 0.9,
        "gain_max": 1.25
      }
    }
  },
  "ir_tuning": {
    "gain_scale": 1.03,
    "offset_shift": 2.0
  },
  "vegetation_tuning": {
    "enabled": true,
    "strength": 1.0,
    "mask": {
      "exg_threshold": 20.0,
      "exg_softness": 15.0,
      "rg_ratio_threshold": 1.05,
      "rg_ratio_softness": 0.1,
      "gb_ratio_threshold": 1.05,
      "gb_ratio_softness": 0.1,
      "use_ndvi": true,
      "ndvi_threshold": 0.05,
      "ndvi_softness": 0.05
    },
    "adjust": {
      "red_gain": 0.99,
      "red_offset": 0.0,
      "green_gain": 1.07,
      "green_offset": 0.0,
      "blue_gain": 0.99,
      "blue_offset": 0.0,
      "ir_gain": 1.0,
      "ir_offset": 0.0
    }
  },
  "refinement": {
    "enabled": true,
    "base_params_file": "D:/SCRIPTS/GOV_SP/COLOR_MATCH/hybrid_configs/out_pilot/global_params_pilot.json",
    "blend": 0.6,
    "max_delta_gain": 0.05,
    "max_delta_offset": 12.0,
    "per_channel": {
      "I": {
        "max_delta_gain": 0.08,
        "max_delta_offset": 16.0
      }
    }
  },
  "output": {
    "dir": "E:/SP_OUT/PILOT/SI_01",
    "suffix": "_matched",
    "overwrite": false
  }
}